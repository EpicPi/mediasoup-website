---
title   : Debugging
anchors : true
---


# Debugging


## Logging

**mediasoup** uses the [debug](https://www.npmjs.com/package/debug) module to log internal information. The JavaScript layer of **mediasoup** produces its own logs and also collects logs generated by the media worker subprocesses.

There are three log severities:

* DEBUG: verbose information logged to `stdout`
* WARN: warning messages logged to `stderr`
* ERROR: error messages logged to `stderr`

All the logs generated by **mediasoup** have a namespace starting with "mediasoup" plus colon, followed by the log severity plus colon (just if WARN or ERROR), and followed by the internal component name (if any).

Logging example once **mediasoup** is started with DEBUG `logLevel`:

```
mediasoup mediasoup version 0.3.0-pre2 +0ms
mediasoup Server() [options:{ numWorkers: 1, logLevel: 'debug', logTags: [ 'info', 'ice' ], rtcMinPort: 40000, rtcMaxPort: 49999, rtcListenIPv4: true }] +4ms
mediasoup:Server constructor() [options:{ numWorkers: 1, logLevel: 'debug', logTags: [ 'info', 'ice' ], rtcMinPort: 40000, rtcMaxPort: 49999, rtcListenIPv4: true }] +15ms
mediasoup:WARN:Server ignoring unknown option "numWorkers" +3ms
mediasoup:Worker constructor() [id:olsdnymj#1, parameters:"--logLevel=debug --logTag=info --logTag=ice --rtcListenIPv4=true --rtcMinPort=40000 --rtcMaxPort=49999"] +0ms
mediasoup:Channel constructor() +5ms
mediasoup:Server createRoom() [options:{ mediaCodecs: [ { kind: 'audio', name: 'audio/opus', clockRate: 48000 }, { kind: 'video', name: 'video/vp8', clockRate: 90000 } ] }] +2ms
mediasoup:Worker createRoom() [options:{ mediaCodecs: [ { kind: 'audio', name: 'audio/opus', clockRate: 48000 }, { kind: 'video', name: 'video/vp8', clockRate: 90000 } ] }] +2ms
mediasoup:Channel request() [method:worker.createRoom, id:51207972] +1ms
mediasoup:mediasoup-worker [id:olsdnymj#1] Settings::PrintConfiguration() | <configuration> +53ms
mediasoup:mediasoup-worker [id:olsdnymj#1] Settings::PrintConfiguration() | logLevel: "debug" +1ms
mediasoup:mediasoup-worker [id:olsdnymj#1] Settings::PrintConfiguration() | logTag: "info" +0ms
mediasoup:mediasoup-worker [id:olsdnymj#1] Settings::PrintConfiguration() | logTag: "ice" +0ms
mediasoup:mediasoup-worker [id:olsdnymj#1] Settings::PrintConfiguration() | rtcListenIPv4: "1.2.3.4" +0ms
mediasoup:mediasoup-worker [id:olsdnymj#1] Settings::PrintConfiguration() | rtcListenIPv6: (unavailable) +0ms
mediasoup:mediasoup-worker [id:olsdnymj#1] Settings::PrintConfiguration() | rtcMinPort: 40000 +0ms
mediasoup:mediasoup-worker [id:olsdnymj#1] Settings::PrintConfiguration() | rtcMaxPort: 49999 +0ms
mediasoup:mediasoup-worker [id:olsdnymj#1] Settings::PrintConfiguration() | </configuration> +0ms
mediasoup:mediasoup-worker [id:olsdnymj#1] main::main() | starting mediasoup-worker [pid:52724] +0ms
mediasoup:mediasoup-worker [id:olsdnymj#1] main::main() | Little-Endian CPU detected +20ms
mediasoup:mediasoup-worker [id:olsdnymj#1] main::main() | 64 bits architecture detected +0ms
mediasoup:mediasoup-worker [id:olsdnymj#1] DepLibUV::PrintVersion() | loaded libuv version: 1.10.0 +0ms
mediasoup:mediasoup-worker [id:olsdnymj#1] DepOpenSSL::ClassInit() | loaded openssl version: OpenSSL 1.0.2j  26 Sep 2016 +0ms
mediasoup:mediasoup-worker [id:olsdnymj#1] DepLibSRTP::ClassInit() | loaded libsrtp version: libsrtp 2.0.0 +0ms
mediasoup:Channel received message: { accepted: true, data: { capabilities: { codecs: [Object], fecMechanisms: [], headerExtensions: [Object] } }, id: 51207972 } +2ms
mediasoup:Worker "worker.createRoom" request succeeded +2ms
mediasoup:Room constructor() [internal:{ roomId: 72069541 }, data:{ capabilities: { codecs: [ [Object], [Object] ], fecMechanisms: [], headerExtensions: [ [Object] ] } }] +0ms
```


### Enable logging

By default logging is turned off. In order to enable it, the `DEBUG` environment variable must be set *before* loading **mediasoup** and any other Node.js module also using the **debug** module.

<div markdown="1" class="note">
Check the [debug](https://www.npmjs.com/package/debug) module documentation for further information regarding how to filter specific log messages based on namespace matching rules.
</div>

Log messages generated by media worker subprocesses deserve a special treatment. They are just generated if their severity is equal or higher than the given [logLevel](/api/#Server-ServerSettings), but they are just logged if the value of the `DEBUG` environment variable matches their namespace.

Logs generated by the media worker subprocesses can have the following namespaces:

* "mediasoup:mediasoup-worker"
* "mediasoup:WARN:mediasoup-worker"
* "mediasoup:ERROR:mediasoup-worker"

#### Examples

* Set `DEBUG` environment variable before running `node`:

```bash
$ export DEBUG="mediasoup*"
$ node myapp.js

# or:

$ DEBUG="mediasoup*" node myapp.js
```

* Set the `DEBUG` environment variable in Node.js before loading **mediasoup**:

```javascript
process.env.DEBUG = "mediasoup*"

var mediasoup = require("mediasoup");
```

* Log everything (including logs generated by other libraries using the **debug** module such as [Express](http://expressjs.com/en/guide/debugging.html)):

```bash
$ export DEBUG="*"
```

* Just log messages generated by **mediasoup**:

```bash
$ export DEBUG="mediasoup*"
```

* Just log WARN and ERROR messages generated by **mediasoup**:

```bash
$ export DEBUG="mediasoup:WARN:* mediasoup:ERROR:*"
```


## Log tags

Certain log categories can be enabled in runtime for debugging purposes by using [logTags](/api/#Server-ServerSettings). Those tags just apply to logs generated by media worker subprocesses.

The available list of log tags is the following:

* "info": Generates logs about software/library versions, configuration and process information.
* "ice": Generates logs about ICE.
* "dtls": Generates logs about DTLS.
* "rtp": Generates logs about RTP.
* "srtp": Generates logs about SRTP encryption/decryption.
* "rtcp": Generates logs about RTCP.

<div markdown="1" class="note">
Remember: These logs are just generated if their severity is equal or higher than the given [logLevel](/api/#Server-ServerSettings), but they are just logged if the value of the `DEBUG` environment variable matches their namespace.
</div>


### Examples

* Log all the RTCP warnings and any kind of error:

```bash
$ export DEBUG="mediasoup:WARN:* mediasoup:ERROR:*"
$ node myapp.js
```

```javascript
var mediasoup = require("mediasoup");

var server = mediasoup.Server({
  logLevel : "warn",
  logTags  : [ "rtcp" ]
});
```

* Log all the ICE debugs/warnings and any kind of error:

```bash
$ export DEBUG="mediasoup*"
$ node myapp.js
```

```javascript
var mediasoup = require("mediasoup");

var server = mediasoup.Server({
  logLevel : "debug",
  logTags  : [ "ice" ]
});
```

* ... and enable ICE and DTLS warning logs in runtime:

```javascript
server.updateSettings({
  logTags  : [ "rtcp", "ice", "dtls" ]
});
```
