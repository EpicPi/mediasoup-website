## Worker
{: #Worker}

A worker represents a mediasoup worker child subprocess that handles media realtime-communications. It runs in a single CPU core and can handle many [Router](#Router) instances.


### Dictionaries
{: #Worker-dictionaries}

<section markdown="1">

#### WorkerSettings
{: #Worker-WorkerSettings .code}

<div markdown="1" class="table-wrapper L3 M5">

Field                    | Type    | Description   | Required | Default
------------------------ | ------- | ------------- | -------- | ---------
`logLevel`               | String  | Logging level for logs generated by the media worker subprocesses (check the [Debugging](/documentation/v3/mediasoup/debugging/) documentation). Valid values are "debug", "warn", "error" and "none". | No | "error"
`logTags`                | Array&lt;String&gt; | Log tags for debugging. Check the list of available tags in [Debugging](/documentation/v3/mediasoup/debugging/) documentation. | No | `[ ]`
`rtcMinPort`             | Number  | Minimun RTC port for ICE, DTLS, RTP, etc. | No | 10000
`rtcMaxPort`             | Number  | Maximum RTC port for ICE, DTLS, RTP, etc. | No | 59999
`dtlsCertificateFile`    | String  | Path to the DTLS certificate. If unset, one is dynamically created. | No |
`dtlsPrivateKeyFile`     | String  | Path to the DTLS private key. If unset, one is dynamically created. | No |

</div>

#### WorkerUpdateableSettings
{: #Worker-WorkerUpdateableSettings .code}

<div markdown="1" class="table-wrapper L3">

Field                    | Type    | Description   | Required | Default
------------------------ | ------- | ------------- | -------- | ---------
`logLevel`               | String  | Logging level for logs generated by the media worker subprocesses (check the [Debugging](/documentation/v3/mediasoup/debugging/) documentation). Valid values are "debug", "warn", "error" and "none". | No | "error"
`logTags`                | Array&lt;String&gt; | Log tags for debugging. Check the list of available tags in [Debugging](/documentation/v3/mediasoup/debugging/) documentation. | No |

</div>

</section>


### Properties
{: #Worker-properties}

<section markdown="1">

#### worker.pid
{: #worker-pid .code}

* `@type` Number, read only

The PID of the worker process.

#### worker.closed
{: #worker-closed .code}

* `@type` Boolean, read only

Whether the worker is closed.

</section>


### Methods
{: #Worker-methods}

<section markdown="1">

#### worker.close()
{: #worker-close .code}

Closes the worker, including all its routers. It emits an "observer:close" event.

#### worker.updateSettings(settings)
{: #worker-updateSettings .code}

* `@async`

Updates the worker settings in runtime. Just a subset of the worker settings can be updated.

<div markdown="1" class="table-wrapper L3">

Argument   | Type    | Description | Required | Default 
---------- | ------- | ----------- | -------- | ----------
`settings` | [WorkerUpdateableSettings](#Worker-WorkerUpdateableSettings) | Worker updateable settings. | No |

</div>

#### worker.createRouter({ mediaCodecs })
{: #worker-createRouter .code}

* `@async`
* `@returns` [Router](#Router)

Creates a new router.

<div markdown="1" class="table-wrapper L3">

Argument      | Type    | Description | Required | Default 
------------- | ------- | ----------- | -------- | ----------
`mediaCodecs` | sequence&lt;[RouterMediaCodec](#Router-RouterMediaCodec)&gt; | Router media codecs. | Yes |

</div>

Usage example:

```javascript
const mediaCodecs =
[
  {
    kind        : "audio",
    mimeType    : "audio/opus",
    clockRate   : 48000,
    channels    : 2
  },
  {
    kind       : "video",
    mimeType   : "video/H264",
    clockRate  : 90000,
    parameters :
    {
      "packetization-mode"      : 1,
      "profile-level-id"        : "42e01f",
      "level-asymmetry-allowed" : 1
    }
  }
];

const router = await worker.createRouter({ mediaCodecs });
```

</section>


### Events
{: #Worker-events}

The Worker class inherits from [EventEmitter](https://nodejs.org/api/events.html#events_class_eventemitter).

<section markdown="1">

TODO: died, observer:close, observer:newrouter

#### worker.on("close")
{: #worker-on-close .code}

Emitted when the worker is closed.

#### worker.on("newroom", fn(room))
{: #worker-on-newroom .code}

Emitted when a new room is created.

<div markdown="1" class="table-wrapper L3">

Argument | Type    | Description   
-------- | ------- | ----------------
`room`   | [Room](#Room) | New `room`.

</div>

</section>
